@using JsonEverythingNet.Services
@inject DataManager DataManager

<nav class="mx-3 navbar nav-container @(isCollapsed ? "collapsed" : "")">
	<div class="container-fluid width-auto">
		<div class="row justify-content-center">
            <NavLink class="col mx-3 text-center btn-primary header-btn" href="json-schema">
                <div>
                    <div>JSON Schema</div>
					<div class="feature-description text-muted-light">Constraints-based validation of JSON data</div>
                </div>
            </NavLink>
			<NavLink class="col mx-3 text-center btn-primary header-btn" href="json-path">
				<div>
					<div>JSON Path</div>
					<div class="feature-description text-muted-light">Query JSON data - "XPath for JSON"</div>
				</div>
			</NavLink>
			<NavLink class="col mx-3 text-center btn-primary header-btn" href="json-e">
				<div>
					<div>JSON-e</div>
					<div class="feature-description text-muted-light">Templating and transformation of JSON data</div>
				</div>
			</NavLink>
			<NavLink class="col mx-3 text-center btn-primary header-btn" href="json-logic">
				<div>
					<div>JSON Logic</div>
					<div class="feature-description text-muted-light">Complex rule definition and evaluation using JSON</div>
				</div>
			</NavLink>
			<NavLink class="col mx-3 text-center btn-primary header-btn" href="json-patch">
				<div>
					<div>JSON Patch</div>
					<div class="feature-description text-muted-light">Describe and process alterations to JSON documents</div>
				</div>
			</NavLink>
			<NavLink class="col mx-3 text-center btn-primary header-btn" href="json-pointer">
				<div>
					<div>JSON Pointer</div>
					<div class="feature-description text-muted-light">Identify specific locations within JSON data</div>
				</div>
			</NavLink>
		</div>
	</div>
	<button class="collapse-toggle-btn" @onclick="ToggleCollapse" title="@(isCollapsed ? "Expand" : "Collapse")">
		<span class="toggle-icon">@(isCollapsed ? "▼" : "▲")</span>
	</button>
</nav>

@code {
	private bool isCollapsed = false;

	protected override async Task OnInitializedAsync()
	{
		var stored = await DataManager.Get("navMenuCollapsed");
		if (stored != null && bool.TryParse(stored, out var collapsed))
		{
			isCollapsed = collapsed;
		}
	}

	private async Task ToggleCollapse()
	{
		isCollapsed = !isCollapsed;
		await DataManager.Set("navMenuCollapsed", isCollapsed.ToString());
	}
}
